{
  "hash": "7f2a31cfb00e770d22ade3b250697785",
  "result": {
    "engine": "knitr",
    "markdown": "# Adding a basemap in QGIS\n\n::: {.cell}\n\n:::\n\n<style>\na.glossary {\n  color: #8A1E1E;\n  text-decoration: underline;\n  cursor: help;\n  position: relative;\n}\n\n/* only needed for popup = \"click\" */\n/* popup-definition */\na.glossary .def {\n  display: none;\n  position: absolute;\n  z-index: 1;\n  width: 200px;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -100px;\n  background-color: #333;\n  color: white;\n  padding: 5px;\n  border-radius: 6px;\n}\n/* show on click */\na.glossary:active .def {\n  display: inline-block;\n}\n/* triangle arrow */\na.glossary:active .def::after {\n  content: ' ';\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: #333 transparent transparent transparent;\n}\n</style>\n\n\n\nBasemaps are a background map that will be used to help users understand where things are taking place - they give them a recognisable reference.\n\nWorking with the STATS19 data, it would be quite helpful to have a map where the roads are quite prominent!\n\n## The simplest way to get started\n\nQGIS has one basemap built in - so let's load that in first.\n\nLook at the 'Browser' panel in QGIS, which will probably be on the left-hand side of your screen.\n\nClick on the arrow next to ‘XYZ Tiles’\n\nOR\n\nDouble click on the phrase ‘XYZ Tiles’\n\n![](images/qgis_browser_xyz.png)\n\nNow double click on ‘OpenStreetMap’\n\n![](images/qgis_browser_xyz_osm.png)\n\nYou should now be presented with a zoomed-out map of the world - if you've been reading this book in order, you may recognise the <a class='glossary' title=''>Mercator projection</a>! If you're interested, you can go back and brush up on projections in @sec-projections-crs.\n\n::: {.callout-warning}\nIt's important that you credit OpenStreetMap when sharing this map in any way, in accordance with its licencing terms.\n\nThe licencing text you need to include is this:\n\n**© OpenStreetMap contributors, licenced as CC BY-SA**\n:::\n\n---\n\n::: {.callout-note}\n\nYou can stop reading here and move onto @sec-qgis-point if you like! There you will learn about importing a dataset of points.\n\nHowever, if you want to use a different basemap to the default one provided by QGIS or are interested in learning about an alternate, less 'busy' looking basemap, then you can carry on to the sections below.\n\n:::\n\n---\n\n## Using different basemap providers\n\nBy default, QGIS only offers OpenStreetMap basemap tiles.\n\nHowever, you can easily load in additional tiles.\n\n::: {.callout-warning}\nMake sure to appropriately credit the providers of any basemap services you use when sharing your maps, even internally!\n:::\n\nTo add new basemaps, right click on 'XYZ Tiles' in the Browser and select 'New Connection...'.\n\n![](images/qgis_new_connection.png)\n\nHere, you can give your new map tiles any name you like.\n\n![](images/qgis_xyz_connection_dialog.png)\n\nUnder the URL setting, enter one of the following URLS^https://astro-geo-gis.com/liaison/qgis-tutorials/customizing-map-tiles-in-qgis/\n\n```\nGoogle Maps: http://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\n\nGoogle Hybrid (Satellite + Roads): https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}\n```\n\nMore tiles can be obtained by some careful searching! But note that many tiles will require a <a class='glossary' title='Application Programming Interface | A way for two or more programs to talk to one another. Designed for computer programmers to utilise when writing programs rather than being used by an end user. | You will send a request to an API and it will send back a response. For example, you might request data on the postcode EX2 5AA from the postcodes.io API, and it will return a text string containing data like the latitude and longitude.'>API</a> key and may require payment to use, so you will likely want to stick to the default OpenStreetMaps in most cases.\n\n\n## Loading in a basic world map instead\n\nThere are a few situations in which you might want to use the approach below instead, which will give you a nice plain basemap at the end of it, like the image below.\n- you want your data to be the star of the show\n- you don't have an internet connection available to download the OpenStreetMap tiles\n- you can't use the OpenStreetMap tiles due to licencing restrictions\n\n![](images/qgis_plain_basemap_example.png)\n\n\n::: {.callout-warning}\nThis method gives you a map outline that isn't of a very high resolution - i.e. the areas don't follow the outline of the UK precisely. It's fine if you're using the map at a fairly zoomed-out level, but it might not be so much use if you want to really zoom in to your county or a particular city!\n:::\n\nStart a new project - you can either discard the changes to your previous project if you had a go at adding the OpenStreetMap basemap in, or you can save it somewhere for later.\n\nLook at the very bottom of your QGIS window. Down at the bottom you should see a box that says 'Coordinate'.\n\n![](images/qgis_coordinates_box.png)\n\nNormally this will show the coordinates of the point your mouse is hovering over.\n\nHowever, we can click on this box and do a neat trick!\n\nClick into the box and get rid of the coordinates - either by highlighting them and clicking 'del' or backspace to delete them all at once, or by clicking somewhere in the box and using a combination of those keys to get rid of any numbers and symbols.\n\n![](images/qgis_world_trick.png)\n\nEnter 'world' into this box and click the 'enter' or 'return' key on your keyboard.\n\n![](images/qgis_world_map_trick.png)\n\nVoila! Suddenly you have a world map.\n\n### Cutting out unnecessary areas\n\nFor a lot of people on the HSMA course, you will only be interested in displaying data for the UK - or even just one nation within the UK.\n\nThis world map is split into different <a class='glossary' title='Placeholder'>polygons</a>.\n\nIf we click on the 'select features by area' button on the top toolbar, we can select individual polygons.\n\n![](images/qgis_select_features_by_area_button.png)\n\nHere I've selected only\n\n![](images/qgis_select_uk_only.png)\n\nI can select additional areas by holding 'shift' and selecting an additional polygon. Here I've done this to select Ireland too.\n\n![](images/qgis_select_uk_ireland.png)\n\nIf I click on Ireland again with shift held down, it will be deselected. However, if I click on a selected polygon without shift held down, I will lose all my prior selections, and only the most recently clicked on polygon will be highlighted.\n\nBut just selecting these doesn't do much. We can see that other areas are still visible.\n\nIf we head over to the layers panel, which is probably on the left of your screen, you can see that it has a layer called 'world map'.\n\nWith the polygon(s) you are interested in selected, right click on the 'world map' layer and select 'Save Selected Features As'.\n\n![](images/qgis_save_selected_features_as.png)\n\nThis will bring up the following dialog box.\n\n![](images/qgis_save_vector_layer_as.png)\n\nFrom the format box, you can select any of the options, but choosing 'GeoPackage' or 'GeoJSON' is a good idea as they output a single file that can be easily transferred into other software at a later date.\n\nYou can then enter a file name into the box below, which will be displayed in the next step, so make it something clear and useful. Clicking the three dots to the right of this box will open a standard operating system dialog box for saving the output file - but unusually, we don't actually really care where it's getting saved to! So you can really save it anywhere - though perhaps you might want to reuse this as a starting point in the future for different projects, so knowing where it's gone could be handy.\n\nSo why aren't we too worried about where it's getting saved to? It's because we're interested in two other key things - the tickbox that says 'Save only selected features' and 'Add saved file to map'.\n\nMake sure those are checked, and then click 'Ok'.\n\nYou'll now see a second layer - with the name you entered in the previous step and a new randomly-chosen colour. .\n\n![](images/qgis_new_layer_uk.png)\n\nWe can now untick the box next to the 'World Map' layer - or even right click and choose 'Remove Layer'.\n\n![](images/qgis_remove_layer.png)\n\nNow we'll just have a nice outline of the UK to work with, which will be nice and efficient and clear for our final output.\n\n![](images/qgis_new_basemap_layer_only.png)\n\n\n### Styling our custom map\n\nWith our new layer selected - you can tell it's selected because the name will have a grey background in the 'Layers' panel, and if it's not selected you can click on the name of it in the 'Layers' panel - we then want to take a look at it in the Layer Styling Panel.\n\n::: {.callout-tip}\nThis panel isn't visible by default. If you followed the setup steps in the previous chapted, this should be on the right of your screen.\n\nIf you didn't, you can make it show up by clicking the \"View\" button in the top menu, then \"Panels\" and click on \"Layer Styling\" - this should make a tick appear next it and the panel will open up on the right side of the screen.\n:::\n\n\nTo start with, let's change the background colour of the map.\n\n![](images/qgis_map_colour.png)\n\nClicking on the wide bar of colour with the label 'Color' brings up a colour picker.\n\n![](images/qgis_colour_select.png)\n\nWe can drag the crosshair to a nice pale green - or any colour you like!\n\n![](images/qgis_colour_select_green.png)\n\nThen click on the back arrow next to 'Select Color', near the top of the layer styling panel, to get back to the previous screen.\n\nNext, you'll notice that we originally had 'Fill' selected.\nClick on 'Simple Fill' instead.\nIt should show up by default, but if it doesn't, click on the little black arrow to the left of the word 'Fill'.\n\n![](images/qgis_simple_fill.png)\n\nYou can see thaat now we get some extra options available to us.\n\nFirst, let's get rid of the black outline by clicking the dropdown next to 'Stroke style' and choosing 'No Line'.\n\nNext, let's add in a background colour.\n\nClick on the words 'layer rendering' towards the bottom of the layer styling panel.\n\n![](images/qgis_layer_rendering.png)\n\nNext, tick the box 'Draw effects' and click on the yellow star to the right to change the options.\n\n![](images/qgis_draw_effects.png)\n\nTick 'Outer Glow' and set the following options.\n\nSpread = 200\nBlur radius = 0\nSingle Color = Blue\n\n![](images/qgis_outer_glow.png)\n\nYou now have a a nice plain UK map to work from!\n\n![](images/qgis_plain_uk_Map.png)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}